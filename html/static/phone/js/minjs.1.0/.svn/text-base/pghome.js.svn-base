$(function(){function t(){var t=document.documentElement.clientWidth,e=document.getElementsByTagName("html")[0],n=document.getElementsByTagName("body")[0];500>t?(t=parseInt(t/8),e.style.fontSize=t+"px",n.style.fontSize=t+"px"):t>=500&&(t=500,t=parseInt(t/8),e.style.fontSize=t+"px",n.style.fontSize=t+"px")}function e(){var t=$(".photos-list img").css("width");$(".photos-list img").css("height",t)}t(),e(),window.addEventListener("resize",function(){t(),e()},!1)});
$(function(){$(".column").tap(function(){$(".nav").animate({"-webkit-transform":"translate3d(0,100%,0)",transform:"translate3d(0,100%,0)",opacity:"1"},"cubic-bezier(0.1,0.57,0.1,1)",800,function(){$(".top-bar").css("display","none")})}),$(".shrink").tap(function(){$(".top-bar").css("display","block"),$(".nav").animate({"-webkit-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)",opacity:"0"},"cubic-bezier(0.1,0.57,0.1,1)",800)})});
$(".pg_info li").tap(function(){0==$(".pg_info li").index($(this))?($(".pg_border").animate({"-webkit-transform":"translate3d(0,0,0)"},200),$(".pg_album").show(),$(".pg_msg").hide(),$(this).addClass("pg-info-cur").siblings().removeClass("pg-info-cur")):2==$(".pg_info li").index($(this))&&($(".pg_border").animate({"-webkit-transform":"translate3d(1.61rem,0,0)"},200),$(".pg_album").hide(),$(".pg_msg").show(),$(this).addClass("pg-info-cur").siblings().removeClass("pg-info-cur"))}),$(".ifspread").tap(function(){"none"==$(this).parent("div").find(".spread-main").css("display")?($(this).parent("div").find(".spread-main").css({display:"block"}),$(this).animate({"-webkit-transform":"rotate(0)",transform:"rotate(0)"},200)):($(this).parent("div").find(".spread-main").css({display:"none"}),$(this).animate({"-webkit-transform":"rotate(180deg)",transform:"rotate(180deg)"},200))});var pghome={host:null,pg_id:0,count:0,get_host_name:function(){var e=window.location.href,t=e.lastIndexOf("/")+1;if(-1!=e.lastIndexOf("?")){var n=e.lastIndexOf("?");host_name=e.substring(t,n)}else host_name=e.substring(t);return host_name},get_img_h:function(){var e=$('<div class="pg_album_list"><a href="javascript:;"><img src="/static/phone/images/photo3.jpg"><h4></h4><i></i></a></div>').appendTo(".pg_album"),t=e.find("img").get(0).scrollWidth;return e.remove(),t},is_avatar:function(e){var t="";return t="0"==e?"/static/phone/images/user_head.gif":"http://image.paiwo.co/"+e},put_tag:function(e){var t=0;t=e.length>5?4:e.length;for(var n='<span>"</span>',i=0;t>i;i++)n+=i==t-1?"<span>"+e[i].tag_word+"</span>":"<span>"+e[i].tag_word+"</span><i>|</i>";return n+='<span>"</span>'},is_sex:function(e){return"1"==e?"boy":"2"==e?"girl":"nosex"},put_gender:function(e){return 1==e?"男":2==e?"女":void 0},put_banner:function(e){return e?"url(http://image.paiwo.co/"+e+")":"url(/static/images/bg.jpg)"},put_brith:function(e){if(""!=e){var t=e.split("-"),n=""+t[0]+"年"+t[1]+"月"+t[2]+"日",i="<li><span>生日/</span><i>"+n+"</i></li>";return i}},pg_info:function(){$.ajax({url:"/a/photographer/info",type:"POST",dataType:"json",data:{user_host:pghome.host},async:!1,success:function(e){if(0==e.error_id){var t=e.result,n=document.querySelector(".photog_avatar"),i=document.querySelector(".photog_key"),r=document.querySelector(".photog_nick"),a=document.querySelector(".photog_over"),o=document.querySelector(".count_coll"),s=document.querySelector(".count_like"),p=(document.querySelector(".pg_album"),document.querySelector("#pg_intro")),u=document.querySelector("#pg_contact"),d=document.querySelector(".photo_type"),c=document.querySelector(".photo_address"),l={},g={};pghome.pg_id=t.photographer_id,pghome.count=t.album_count,l.desc=t.user_desc,l.host=t.user_host,l.birth=t.birthday,l.gender=t.gender,g.phone=t.phone,g.qq=t.qq,g.wechat=t.wechat,g.weibo=t.weibo,i.innerHTML=pghome.put_tag(t.tag_list),n.setAttribute("src",pghome.is_avatar(t.avatar)),r.innerHTML=t.nick_name+'<i class="'+pghome.is_sex(t.gender)+'"></i>',a.style.backgroundImage=pghome.put_banner(t.banner_photo),o.innerHTML="<i></i>"+t.favorite_count,s.innerHTML="<i></i>"+t.like_count,p.innerHTML=pghome.put_intro(l),u.innerHTML=pghome.put_contact(g),d.innerHTML=pghome.services_type(t.service_type_list),c.innerHTML=pghome.put_take_location(t.service_address_list)}},error:function(){}})},get_album_list:function(e,t,n){$.ajax({url:"/a/album/list",type:"POST",dataType:"json",async:!1,data:{user_host:e,photographer_id:t,page_no:1,page_size:n},success:function(e){if(0==e.error_id){for(var t=e.result.album_list,n="",i=document.querySelector(".pg_album"),r=t.length-1;r>=0;r--)n+='<div class="pg_album_list" data-code="'+t[r].album_id+'"><a href="/m/album/'+t[r].album_id+'"><img height="" src="http://image.paiwo.co/'+t[r].cover_path+'@!560x560"><h4>'+t[r].album_name+"</h4><i>"+t[r].photo_count+"</i></a></div>";i.innerHTML=n}},error:function(){}})},put_intro:function(e){var t="";return""!=e.desc&&(t+='<li class="pg_info_desc"><span>描述/</span><p>'+e.desc+"</p></li>"),""!=e.host&&(t+="<li><span>个性域名/</span><em>paiwo.co/"+e.host+"</em></li>"),"None"!=e.birth&&(t+=pghome.put_brith(e.birth)),""!=e.gender&&(t+="<li><span>性别/</span><i>"+pghome.put_gender(e.gender)+"</i></li>"),t},put_contact:function(e){var t="";return""!=e.phone&&(t+="<li><span>手机号码/</span><i>"+e.phone+"</i></li>"),e.qq&&(t+="<li><span>QQ/</span><i>"+e.qq+"</i></li>"),e.wechat&&(t+="<li><span>微信/</span><i>"+e.wechat+"</i></li>"),e.weibo&&(t+="<li><span>微博/</span><i>"+e.weibo+"</i></li>"),t},services_type:function(e){var t="<dt>—— 接拍类型 ——</dt>";if(e.length)for(var n=0;n<e.length;n++)switch(e[n]){case"1":t+="<dd>婚纱</dd>";break;case"2":t+="<dd>写真</dd>";break;case"3":t+="<dd>婚礼</dd>";break;case"4":t+="<dd>儿童</dd>";break;case"5":t+="<dd>其他</dd>"}else t+="<dd>无</dd>";return t},put_take_location:function(e){function t(e){var t=e.substring(0,2),n=e.substring(0,5)+"-00-00";if("01"==t){if("01-00-00-00"==e)return"海外";var i=allArea.province["01-00-00-00"];for(var r in i)if(r==e)return i[r]}else if("02"==t){if("02-00-00-00"==e)return"中国全境";var a=allArea.province["02-00-00-00"],o=e.substring(6);if("00-00"==o){for(var r in a)if(r==e)return a[r]}else{var s=e.substring(0,8)+"-00";for(var r in a)if(r==n){var p=allArea.city[n];for(var r in p){if(r==s)return p[r];var u=allArea.district[s];for(var r in u)if(r==e)return u[r]}}}}}var n="<dt>—— 接拍地 ——</dt>";if(e.length)for(var i=0;i<e.length;i++)n+="<dd>"+t(e[i])+"</dd>";else n+="<dd>无</dd>";return n}};!function(){var e=window.location.hash;if(console.log(e),""!=e)if(-1!=e.lastIndexOf("?")){var t=e.lastIndexOf("?"),n=e.substring(1,t);window.location.href="/m"+n}else window.location.href="/m"+e.replace("#","");else pghome.host=pghome.get_host_name(),pghome.pg_info(),pghome.get_album_list(pghome.host,pghome.pg_id,pghome.count)}();